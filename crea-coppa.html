<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title data-lang="create_cup_title">Crea la tua Coppa</title>
<link rel="stylesheet" href="style.css" />

<style>
/* ‚úÖ BOTTONE HOME */
.home-button {
  position: fixed;
  top: 12px;
  left: 12px;
  background: #ffffffd9;
  border: 1px solid #ddd;
  padding: 7px 12px;
  border-radius: 12px;
  font-size: 18px;
  text-decoration: none;
  color: #111;
  font-weight: 600;
  z-index: 9999;
  backdrop-filter: blur(6px);
}

/* ‚úÖ POPUP */
#popup-coppa {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.45);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 20000;
}

#popup-coppa .popup-content {
  background: #fff;
  padding: 24px;
  border-radius: 14px;
  width: 80%;
  max-width: 340px;
  text-align: center;
  font-size: 17px;
  line-height: 1.4;
  box-shadow: 0 6px 25px rgba(0,0,0,0.18);
}

#popup-coppa button {
  margin-top: 16px;
  background: #ff7a00;
  color: white;
  border: none;
  padding: 10px 14px;
  border-radius: 10px;
  font-size: 16px;
  cursor: pointer;
  width: 100%;
}
</style>

</head>

<body>

<!-- üè† TASTO HOME -->
<a href="index.html" class="home-button">üè†</a>

<!-- ‚úÖ DYNAMIC ISLAND -->
<div id="dynamic-island" class="dynamic-island">
  <div id="island-text" data-lang="welcome_island">Aggiunto</div>
  <div id="island-progress"><div id="island-bar"></div></div>
</div>

<header>
    <h1 data-lang="create_cup_title">Crea la tua Coppa Gelato</h1>
</header>

<div id="top-status"></div>

<section id="step-size">
    <h2 data-lang="choose_size">Scegli il Formato</h2>

    <div class="menu-item option" onclick="selectSize('PICCOLA',2,1,1,1)">
        PICCOLA (2 gusti, 1 granella, 1 topping, 1 extra)
    </div>

    <div class="menu-item option" onclick="selectSize('MEDIA',3,2,2,1)">
        MEDIA (3 gusti, 2 granelle, 2 topping, 1 extra)
    </div>

    <div class="menu-item option" onclick="selectSize('GRANDE',4,2,2,2)">
        GRANDE (4 gusti, 2 granelle, 2 topping, 2 extra)
    </div>
</section>

<section id="step-container"></section>

<script>
/* ‚úÖ Traduzioni */
const translations = {
  it: { create_cup_title:"Crea la tua Coppa Gelato", choose_size:"Scegli il Formato", welcome_island:"Aggiunto!" },
  en: { create_cup_title:"Create Your Ice Cream Cup", choose_size:"Choose a Size", welcome_island:"Added!" },
  de: { create_cup_title:"Erstelle deinen Eisbecher", choose_size:"W√§hle die Gr√∂√üe", welcome_island:"Hinzugef√ºgt!" }
};

const lang = localStorage.getItem("lang") || "it";

function applyLanguage(){
  document.querySelectorAll("[data-lang]").forEach(el=>{
    const key = el.dataset.lang;
    if(translations[lang][key]) el.textContent = translations[lang][key];
  });
}
applyLanguage();
</script>

<script src="crea-coppa.js"></script>

<!-- ‚úÖ POPUP INFO CREA COPPA -->
<div id="popup-coppa">
  <div class="popup-content">
    <h2>üç® Come funziona</h2>
    <p>
      Prima scegli il formato della coppa.<br>
      Poi scegli gusti, granelle e topping.<br>
      Alla fine vedrai il riepilogo ‚úÖ
    </p>
    <button id="popup-ok">Ho capito</button>
  </div>
</div>

<script>
// ‚úÖ Mostra popup SOLO alla prima visita della sessione
if (!sessionStorage.getItem("coppaInfoShown")) {
  document.getElementById("popup-coppa").style.display = "flex";
}

document.getElementById("popup-ok").onclick = () => {
  sessionStorage.setItem("coppaInfoShown", "true");
  document.getElementById("popup-coppa").style.display = "none";
};
</script>

</body>
</html>