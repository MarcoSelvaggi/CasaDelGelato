<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>Casa del Gelato</title>
  <link rel="manifest" href="manifest.json">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <link rel="icon" href="favicon.png">
  <link rel="apple-touch-icon" href="icon-192.png">
  <script src="global.js"></script>


  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;margin:0;background:#f6f6f7;color:#111}
    header{text-align:center;padding:22px}

    /* Spazio sotto per non schiacciare la bottom bar */
body {
    padding-bottom: 90px;
}
/* Protezione icone bottom nav */
#bottom-nav img {
    width: 26px !important;
    height: 26px !important;
    object-fit: contain !important;
}
    /* üîù BARRA FISSA + HOME */
    #top-fixed-bar {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 55px;
      display: flex;
      justify-content: center;
      align-items: center;
      background: white;
      border-bottom: 1px solid #ddd;
      z-index: 9999;
    }

    .home-btn {
        display: flex;
        align-items: center;
        gap: 6px;
        font-size: 17px;
        color: #444;
        text-decoration: none;
    }

    .home-btn img {
        width: 28px;
        height: 28px;
    }

    /* spazio per far scendere il contenuto */
    #top-fixed-spacer {
      height: 55px;
      width: 100%;
    }
    /* Tasto Lavora con Noi (solo in index) */
.jobs-btn {
    position: absolute;
    left: 12px;
    top: 13px;
    padding: 6px 10px;
    background: #ff7a00;
    color: white;
    font-size: 14px;
    border-radius: 10px;
    text-decoration: none;
    font-weight: 600;
    z-index: 9999;
}

    /* LANGUAGE MENU */
    #lang-toggle{
      position:fixed; 
      top:14px; 
      right:14px;
      padding:6px 12px;
      border-radius:12px;
      background:white;
      border:1px solid #ddd;
      cursor:pointer; 
      font-size:18px;
      z-index:10000;
    }

    #lang-menu{
      position:fixed; 
      top:50px; 
      right:14px;
      background:#fff;
      padding:6px 0;
      border-radius:10px;
      box-shadow:0 6px 20px rgba(0,0,0,0.12);
      display:none;
      z-index:10001;
    }

    #lang-menu button{
      padding:10px 16px;
      border:none;
      background:transparent;
      cursor:pointer;
      font-size:15px;
      text-align:left;
      width:100%;
    }

    #lang-menu button:hover{background:#f2f2f2;}

    /* BUTTONS */
    .menu-section{padding:22px;text-align:center}
    .btn{
      display:block;width:240px;text-align:center;
      padding:12px 14px;border-radius:12px;background:#ff7a00;color:#fff;
      text-decoration:none;margin:14px auto;font-size:17px;font-weight:600;
    }

    /* CARDS */
    .shop-card {
      background:white;
      padding:16px;
      border-radius:14px;
      margin:14px auto;
      max-width:330px;
      box-shadow:0 2px 6px rgba(0,0,0,0.08);
      text-align:left;
    }
    .shop-card b {font-size:16px;margin-bottom:4px;display:block;}
    .shop-card a {text-decoration:none;margin-top:4px;display:block;font-size:15px;color:#007aff;}

/* ‚ò∞ MENU DROPDOWN */
#menu-dropdown a{
  display:block;
  padding:10px;
  border-radius:10px;
  text-decoration:none;
  color:#111;
  font-size:15px;
  font-weight:600; /* üî• COME INFO & CONTATTI */
}

#menu-dropdown a:hover{
  background:#f2f2f7;
}

.menu-item {
  display: flex !important;
  flex-direction: row !important;
  align-items: center !important;
  gap: 12px;
}

.menu-item svg.menu-icon {
  width: 18px;
  height: 18px;
  flex-shrink: 0;
  stroke: #111;
  stroke-width: 1.8;
  fill: none;
  display: block; 

}
.icon-wrapper{
  position: relative;
  display: inline-flex;
  align-items: center;
}

.menu-new-only{
  display: flex;
  align-items: center;
  gap: 12px;
}

.badge-new-left{
  background: #ff3b30;
  color: #fff;
  font-size: 9px;          /* ‚¨ÖÔ∏è pi√π piccolo */
  font-weight: 700;
  padding: 3px 6px;        /* ‚¨ÖÔ∏è meno padding */
  border-radius: 999px;
  line-height: 1;
  letter-spacing: .3px;
}


/* ===============================
   ‚è±Ô∏è WAIT BAR ‚Äì DIMENSIONI BLOCCATE
=============================== */

#wait-bar {
  /* üîí isolamento totale */
  all: unset;
  box-sizing: border-box;

  position: fixed;
  bottom: 90px;
  left: 12px;

  display: none;
  align-items: center;
  justify-content: center;

  background: #111;
  color: #fff;

  /* üî¢ dimensioni IDENTICHE a crea coppa */
  font-family: -apple-system, BlinkMacSystemFont,
               "SF Pro Text", "SF Pro Display",
               system-ui, sans-serif;

  font-size: 12px;
  font-weight: 600;
  line-height: 1;

  padding: 6px 12px;
  border-radius: 11px;

  z-index: 999999;

  /* ‚ùå nessuna scala, mai */
  transform: none !important;
  zoom: 1 !important;
}

/* üîí testo interno */
#wait-bar span {
  all: unset;
  font: inherit;
  color: inherit;
  line-height: inherit;
}

/* testo descrittivo */
#wait-full {
  font-size: 11.5px;
  font-weight: 500;
  opacity: 0.75;
}

/* countdown */
#wait-time,
#wait-mmss {
  font-size: 12px;
  font-weight: 600;
  letter-spacing: 0.2px;
}
/* ‚ò∞ MENU BUTTON ‚Äì PROFILO (identico a HOME) */
#menu-btn{
  position: absolute;
  left: 14px;
  top: 14px;              /* üîí BLOCCATO */
  height: 27px;           /* met√† top bar */
  display: flex;
  align-items: center;

  background: transparent;
  border: none;
  box-shadow: none;
  padding: 0;
  margin: 0;

  font-size: 22px;
  line-height: 1;
  color: #111;

  cursor: pointer;
  z-index: 10001;
}

#menu-btn:active{
  opacity: .6;
}
#menu-btn{
  position: absolute;
  left: 14px;
  top: 50%;
  transform: translateY(-50%);
}
/* ===== FOOTER PROFILO / GLOBALE ===== */
.profile-footer{
  padding: 10px 12px 14px;
  text-align: center;
  font-size: 12px;
  color: #8e8e93;
}

.profile-footer a{
  color:#8e8e93;
  text-decoration:none;
  font-weight:500;
}

.profile-footer a:hover{
  text-decoration:underline;
}

.footer-links{
  margin-bottom:8px;
}

.footer-copy{
  margin-bottom:4px;
}

.footer-version{
  opacity:.6;
}

/* ===============================
   üçé HERO APPLE STYLE
=============================== */

.hero{
  position: relative;
  height: 60vh;
  overflow: hidden;
  background: #000;
}

.hero-img{
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;

  transform: scale(1.08);
  transition: transform 1.2s ease;
}

.hero-content{
  position: relative;
  z-index: 2;
  height: 100%;

  display: flex;
  flex-direction: column;
  align-items: center;

  /* ‚úÖ invece di center */
  justify-content: flex-start;

  padding-top: 28vh;   /* ‚¨ÖÔ∏è QUI controlli l‚Äôaltezza */
  padding-left: 20px;
  padding-right: 20px;

  text-align: center;
  color: #fff;
}

.hero-content h1{
  font-size: 42px;
  font-weight: 700;
  margin-bottom: 12px;
}

.hero-content p{
  font-size: 18px;
  opacity: 0.85;
  margin-bottom: 28px;
}

.hero-btn{
  padding: 14px 22px;
  font-size: 16px;
  font-weight: 600;
  border-radius: 14px;

  background: #ff7a00;
  color: #fff;
  text-decoration: none;

  box-shadow: 0 8px 24px rgba(0,0,0,0.35);
}

/* overlay scuro stile Apple */
.hero::after{
  content:"";
  position:absolute;
  inset:0;
  background: linear-gradient(
    to bottom,
    rgba(0,0,0,0.45),
    rgba(0,0,0,0.55)
  );
}
/* ===============================
   üçè REVEAL ON SCROLL (APPLE)
=============================== */

.reveal{
  opacity: 0;
  transform: translateY(40px);
  transition: all 0.9s cubic-bezier(.22,.61,.36,1);
}

.reveal.in-view{
  opacity: 1;
  transform: translateY(0);
}


/* ===============================
   üçé EXPERIENCE SECTION
=============================== */

.experience{
  position: relative;
  height: 100vh;
  background: #f6f6f7;
}

.experience-inner{
  position: relative;
  height: 100%;

  display: flex;
  flex-direction: column;
  justify-content: center;

  padding-bottom: 160px; /* spazio fisso per CTA + pill */
  box-sizing: border-box;

  overflow: hidden;
}

.exp-step{
  position: absolute;
  inset: 0;

  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;   /* ‚¨ÖÔ∏è NON center */

  text-align: center;
  padding-top: 80px;            /* ‚¨ÖÔ∏è distanza dall‚Äôalto */
  padding-left: 20px;
  padding-right: 20px;

  opacity: 0;
  transform: translateX(60px);
}

.exp-step.active{
  opacity: 1;
  transform: translateX(0);
}

.exp-step h2{
  font-size: 34px;
  font-weight: 700;
  margin-bottom: 12px;
}

.exp-step p{
  font-size: 18px;
  color: #444;
  max-width: 420px;
}

/* ===============================
   üçè EXPERIENCE INDICATOR (APPLE)
=============================== */

.exp-indicator{
  position: absolute;
  bottom: 60px;          /* distanza dal fondo */
  left: 50%;
  transform: translateX(-50%);
  z-index: 5;
}

.exp-bar{
  display: flex;
  align-items: center;
  gap: 8px;

  padding: 8px 14px;
  border-radius: 999px;

  background: rgba(0,0,0,0.06);
  backdrop-filter: blur(8px);
}

/* pallini */
.exp-bar span{
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: #bbb;
  opacity: .5;
  position: relative;
  overflow: hidden;
}

.exp-bar span::after{
  content:"";
  position:absolute;
  inset:0;
  background:#111;
  transform: scaleX(0);
  transform-origin: left;
}

.exp-bar span.active{
  width: 26px;
  border-radius: 999px;
  opacity: 1;
}

.exp-bar span.active::after{
  animation: progress 5s linear forwards;
}

@keyframes progress{
  from{ transform: scaleX(0); }
  to{ transform: scaleX(1); }
}

.exp-cta{
  padding: 8px 16px;          /* piccolo */
  font-size: 13px;
  font-weight: 600;

  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;

  background: #007aff;
  color: #fff;

  border-radius: 999px;
  box-shadow: 0 4px 12px rgba(0,122,255,.35);

  text-decoration: none !important;
  white-space: nowrap;

  transition: transform .2s ease, box-shadow .2s ease;
}

.exp-cta:hover{
  transform: scale(1.04);
  box-shadow: 0 10px 26px rgba(0,122,255,.45);
}

.exp-cta:active{
  transform: scale(0.96);
}

/* üîí mai stile link */
.exp-cta,
.exp-cta:link,
.exp-cta:visited,
.exp-cta:hover,
.exp-cta:active,
.exp-cta:focus{
  color:#fff !important;
  text-decoration:none !important;
}

/* üîí STRUTTURA BLOCCATA EXPERIENCE */
.experience-inner{
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
}

/* SLIDE PRENDONO SPAZIO */
.exp-slides{
  order: 1;
  flex: 1;
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* üî• PULSANTE SEMPRE DOPO IMMAGINE */
.exp-cta{
  order: 2;
  position: static !important;

  margin: 10px 0 12px 0;   /* leggermente pi√π compatto */
  padding: 6px 14px;       /* ‚¨ÖÔ∏è PI√ô PICCOLO */
  font-size: 12.5px;       /* ‚¨ÖÔ∏è leggermente ridotto */
  font-weight: 600;

  background: #007aff;
  color: #fff;

  border-radius: 999px;
  text-decoration: none !important;
  box-shadow: 0 3px 10px rgba(0,122,255,.32);

  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;

  white-space: nowrap;
}

/* PILL SEMPRE SOTTO */
.exp-indicator{
  order: 3;
  margin-bottom: 40px;
}
/* ===== SPAZIATURE STEP (SOLO DISTANZE) ===== */

/* ‚úÖ avvicina sottotitolo al titolo */
.exp-step h2{
  margin-bottom: 12px;   /* distanza titolo ‚Üí sottotitolo */
}

.exp-step p{
  margin-bottom: 80px;   /* distanza sottotitolo ‚Üí immagine */
}


/* ===============================
   üçé IMAGE CARD ‚Äì BACKGROUND
=============================== */

.exp-image{
  /* ‚ùå NIENTE absolute */
  position: relative;

  width: 100%;
  max-width: 420px;

  height: 435px;        /* altezza card */
  margin-top: -120px;    /* ‚¨ÖÔ∏è cresce SOLO verso l‚Äôalto */
  margin-bottom: 12px;  /* distanza dal bottone */

  border-radius: 24px;
  overflow: hidden;

  box-shadow:
    0 12px 32px rgba(0,0,0,0.12),
    0 2px 6px rgba(0,0,0,0.08);

  z-index: 1;           /* dietro testi e bottone */
}

.exp-image img{
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}
.exp-step h2{
  margin-bottom: 6px;   /* titolo ‚Üî sottotitolo */
}

.exp-step p{
  margin-bottom: 12px;  /* sottotitolo ‚Üî immagine */
}
/* Testi sopra la card */
.exp-step h2,
.exp-step p{
  position: relative;
  z-index: 3;
}

/* Bottone sopra la card */
.exp-cta{
  position: relative;
  z-index: 3;
  margin-top: 220px;   /* ‚¨ÖÔ∏è lo ‚Äúappoggi‚Äù sopra l‚Äôimmagine */
}
/* üì± MOBILE FIX ‚Äì pill pi√π vicino al bottone */
@media (max-width: 768px){

  .exp-indicator{
    position: static;          /* ‚¨ÖÔ∏è rientra nel flusso */
    margin-top: 14px;          /* distanza dal bottone */
    margin-bottom: 20px;       /* respiro sotto */
    transform: none;
  }

  .experience-inner{
    padding-bottom: 300px;      /* meno spazio inutile */
  }
}
.hero-after-coppa{
  height: 60vh;
  background: #000;
}

.hero-after-coppa .hero-content{
  padding-top: 28vh;
}

.hero-after-coppa .hero-subtitle{
  font-size: 18px;
  color: #fff;
  opacity: .9;
  max-width: 420px;
}
.hero-after-coppa{
  margin-top: -240px;   /* prova -60 / -80 / -100 */
}

/* ===============================
   üçé HERO ‚Äì LAVORA CON NOI
=============================== */

.hero-lavora{
  height: 60vh;
}

.hero-lavora .hero-content{
  padding-top: 36vh;   /* leggermente pi√π su */
}

.hero-lavora .hero-sub{
  font-size: 18px;
  opacity: .9;
  margin-bottom: 20px;
}

/* bottone variante */
.hero-btn-outline{
  background: transparent;
  border: 2px solid #fff;
  color: #fff;
  box-shadow: none;
}

.hero-btn-outline:hover{
  background: #fff;
  color: #000;
}
.hero-lavora{
  margin-top: 120px;   /* regola qui la distanza tra le due hero */
}
.hero-info{
  margin-top: 120px;   /* stacco netto dalla hero Lavora con noi */
}

/* ‚¨ÜÔ∏è SCROLL TO TOP BUTTON */
#scroll-top-btn{
  position: fixed;
  right: 16px;
  bottom: 110px;

  width: 42px;
  height: 42px;

  border-radius: 50%;
  background: #007aff; /* üîµ BLU iOS */
  color: #fff;

  display: flex;
  align-items: center;
  justify-content: center;

  font-size: 18px;
  font-weight: 700;

  box-shadow: 0 8px 24px rgba(0,122,255,.45); /* ombra blu */

  opacity: 0;
  pointer-events: none;
  transform: translateY(10px);

  transition: 
    opacity .25s ease,
    transform .25s ease;

  z-index: 9999;
}
#scroll-top-btn:active{
  transform: scale(.92);
  background: #0066d6;
}

#scroll-top-btn.show{
  opacity: 1;
  pointer-events: auto;
  transform: translateY(0);
}

#scroll-top-btn:active{
  transform: scale(.92);
}

/* ‚ûï PLUS MENU HERO */
#menu-plus-btn{
  position: absolute;
  right: 16px;
  bottom: 16px;

  width: 48px;
  height: 48px;

  border-radius: 50%;
  background: #007aff;
  color: #fff;

  display: flex;
  align-items: center;
  justify-content: center;

  font-size: 28px;
  font-weight: 500;
  line-height: 1;

  border: none;
  cursor: pointer;

  box-shadow: 0 10px 28px rgba(0,122,255,.45);

  z-index: 5;
}

#menu-plus-btn:active{
  transform: scale(.92);
  background: #0066d6;
}

/* ===============================
   üç® MENU SLIDES ‚Äì COLLASSATE
=============================== */

#menu-slides{
  max-height: 0;
  overflow: hidden;
  opacity: 0;
  transform: translateY(-40px);
  pointer-events: none;

  transition:
    max-height .6s cubic-bezier(.22,.61,.36,1),
    opacity .35s ease,
    transform .6s cubic-bezier(.22,.61,.36,1);
}

/* üîì APERTE */
#menu-slides.open{
  max-height: 1200px;   /* abbastanza per tutte le slide */
  opacity: 1;
  transform: translateY(0);
  pointer-events: auto;
}

/* CREA COPPA ‚Üí resta fullscreen */
.experience:not([data-type="menu"]){
  height: 100vh;
}


/* MENU SLIDES: stato chiuso */
#menu-slides:not(.open) .exp-slides{
  display: none;
}
/* ===============================
   ‚úÖ MENU: CTA + PILL come CREA COPPA
=============================== */
.experience[data-type="menu"] .exp-cta{
  position: static !important;
  margin-top: 10px !important;   /* üî• annulla il 220px */
}

.experience[data-type="menu"] .exp-indicator{
  position: static !important;   /* üî• non pi√π absolute */
  transform: none !important;
  margin-top: 14px;
  margin-bottom: 20px;
}

/* ===============================
   ‚úÖ MENU SLIDES ‚Äì SPAZIO SOLO QUANDO APERTE
=============================== */

/* stato chiuso ‚Üí IDENTICO a prima */
.experience-menu{
  margin-bottom: 0;
}

#info-slides{
  max-height: 0;
  overflow: hidden;
  opacity: 0;
  transform: translateY(-40px);
  pointer-events: none;

  transition:
    max-height .6s cubic-bezier(.22,.61,.36,1),
    opacity .35s ease,
    transform .6s cubic-bezier(.22,.61,.36,1);
}

#info-slides.open{
  max-height: 1200px;
  opacity: 1;
  transform: translateY(0);
  pointer-events: auto;
}
/* ‚ûï PLUS INFO & CONTATTI */
#info-plus-btn{
  position: absolute;
  right: 16px;
  bottom: 16px;

  width: 48px;
  height: 48px;

  border-radius: 50%;
  background: #007aff;
  color: #fff;

  display: flex;
  align-items: center;
  justify-content: center;

  font-size: 28px;
  font-weight: 500;
  line-height: 1;

  border: none;
  cursor: pointer;

  box-shadow: 0 10px 28px rgba(0,122,255,.45);
  z-index: 5;
}

#info-plus-btn:active{
  transform: scale(.92);
  background: #0066d6;
}
/* üì± iOS FIX ‚Äì stacco slide INFO dal nero */
@supports (-webkit-touch-callout: none) {

  .experience-info {
    padding-bottom: calc(160px + env(safe-area-inset-bottom));
  }

}
/* ===============================
   üßä FIX iOS ‚Äì INFO SLIDES + FOOTER
=============================== */

/* spazio reale sotto le slide info */
.experience[data-type="info"]{
  padding-bottom: -120px;
}

/* safe area iPhone */
@supports (-webkit-touch-callout: none) {
  .experience[data-type="info"]{
    padding-bottom: calc(120px + env(safe-area-inset-bottom));
  }
}
/* üìè Footer pi√π staccato quando INFO √® chiuso */
body.info-closed .profile-footer{
  margin-top: 64px;
}

/* quando INFO √® aperto ‚Üí distanza normale */
body.info-open .profile-footer{
  margin-top: 24px;
}
  </style>

  <link rel="stylesheet" href="bottom-nav.css">
</head>

<body>


<!-- üîù BARRA FISSA -->
<div id="top-fixed-bar">

  <button id="menu-btn" aria-label="Menu">‚ò∞</button>

  <a href="home.html" class="home-btn">
    <img src="tastohome.png" alt="home">
  </a>

</div>

<div id="top-fixed-spacer"></div>


<button id="scroll-top-btn" aria-label="Torna su">
  ‚Üë
</button>

<!-- LANGUAGE -->
<div id="lang-toggle">üáÆüáπ ‚ñæ</div>
<div id="lang-menu">
  <button class="lang-btn" data-lang="it">Italiano</button>
  <button class="lang-btn" data-lang="en">English</button>
  <button class="lang-btn" data-lang="de">Deutsch</button>
</div>


<section class="hero">
  <img src="img/hero-gelato.jpg" class="hero-img" alt="Gelato artigianale">

  <div class="hero-content reveal">
    <p data-lang="create_cup_subtitle">
      Crea la tua coppa. Vivi l‚Äôesperienza.
    </p>

  </div>
</section> 

<section class="experience">
  <div class="experience-inner">

    <!-- SLIDE AREA -->
    <div class="exp-slides">

      <div class="exp-step active">
        <h2>Scegli il formato</h2>
        <p>Piccola, media o grande.</p>
        <div class="exp-image">
          <img src="img/exp-formato.jpg">
        </div>
      </div>

      <div class="exp-step">
        <h2>Scegli i gusti</h2>
        <p>I tuoi gusti preferiti.</p>
        <div class="exp-image">
          <img src="img/exp-formato.jpg">
        </div>
      </div>

      <div class="exp-step">
        <h2>Personalizzala</h2>
        <p>Rendi unica la tua coppa.</p>
        <div class="exp-image">
          <img src="img/exp-formato.jpg">
        </div>
      </div>

      <div class="exp-step">
        <h2>Goditela</h2>
        <p>Comunica la coppa al cameriere.</p>
        <div class="exp-image">
          <img src="img/exp-formato.jpg">
        </div>
      </div>

    </div>

    <!-- CTA FISSO -->
    <a href="crea-coppa.html" class="exp-cta">
      Crea la tua coppa
    </a>

    <!-- PILL -->
    <div class="exp-indicator">
      <div class="exp-bar">
        <span class="active"></span>
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>

  </div>
</section>

<section class="hero hero-after-coppa">
  <img src="img/hero-menu.jpg" class="hero-img" alt="Menu Casa del Gelato">

  <div class="hero-content reveal">
    <p class="hero-subtitle">
      Scopri tutti i nostri gusti e ingredienti.
    </p>
  </div>
  <button id="menu-plus-btn" aria-label="Apri menu">
  +
</button>
</section>

<section id="menu-slides"
         class="experience experience-menu"
         data-type="menu">

  <div class="experience-inner">

    <!-- SLIDES -->
    <div class="exp-slides">

      <div class="exp-step active">
        <h2>Coppe</h2>
        <p>Scopri tutte le nostre coppe.</p>
        <div class="exp-image">
          <img src="img/menu-coppe.jpg">
        </div>
      </div>

      <div class="exp-step">
        <h2>Coni</h2>
        <p>Croccanti e artigianali.</p>
        <div class="exp-image">
          <img src="img/menu-coni.jpg">
        </div>
      </div>

      <div class="exp-step">
        <h2>Vaschette</h2>
        <p>Porta il gelato a casa.</p>
        <div class="exp-image">
          <img src="img/menu-vaschette.jpg">
        </div>
      </div>

      <div class="exp-step">
        <h2>Torte gelato</h2>
        <p>Per ogni occasione.</p>
        <div class="exp-image">
          <img src="img/menu-torte.jpg">
        </div>
      </div>

    </div>

    <!-- CTA -->
    <a href="menu.html" class="exp-cta">
      Vai al menu
    </a>

    <!-- PILL -->
    <div class="exp-indicator">
      <div class="exp-bar">
        <span class="active"></span>
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>

  </div>
</section>

<section class="hero hero-after-menu hero-lavora">
  <img src="img/hero-lavora.jpg" class="hero-img" alt="Lavora con noi">

  <div class="hero-content reveal">
    <p class="hero-sub">
      Entra a far parte del team Casa del Gelato
    </p>

    <a href="lavora-con-noi.html" class="hero-btn hero-btn-outline">
      Lavora con noi
    </a>
  </div>
</section>

<section class="hero hero-info">
  <img src="img/hero-info.jpg" class="hero-img" alt="Info e contatti">

  <div class="hero-content">
    <p>Info e contatti</p>
    <p>Orari, indirizzi e tutto quello che ti serve.</p>

    <a href="info-contatti.html" class="hero-btn hero-btn-outline">
      Info & Contatti
    </a>
  </div>
  <button id="info-plus-btn" aria-label="Apri info">
  +
</button>
</section>

<section id="info-slides"
         class="experience experience-info"
         data-type="info">

  <div class="experience-inner">

    <div class="exp-slides">

      <div class="exp-step active">
        <h2>Orari</h2>
        <p>I nostri orari di apertura.</p>
        <div class="exp-image">
          <img src="img/info-orari.jpg">
        </div>
      </div>

      <div class="exp-step">
        <h2>Dove siamo</h2>
        <p>Vieni a trovarci.</p>
        <div class="exp-image">
          <img src="img/info-mappa.jpg">
        </div>
      </div>

      <div class="exp-step">
        <h2>Contatti</h2>
        <p>Scrivici o chiamaci.</p>
        <div class="exp-image">
          <img src="img/info-contatti.jpg">
        </div>
      </div>

    </div>

    <a href="info-contatti.html" class="exp-cta">
      Vai a Info & Contatti
    </a>

    <div class="exp-indicator">
      <div class="exp-bar">
        <span class="active"></span>
        <span></span>
        <span></span>
      </div>
    </div>

  </div>
</section>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyAEO7AonQeZ9SsgXd1Ymw2NZW-Pg4mI8E8",
    authDomain: "casadelgelato-db282.firebaseapp.com",
    projectId: "casadelgelato-db282",
    storageBucket: "casadelgelato-db282.firebasestorage.app",
    messagingSenderId: "121009770190",
    appId: "1:121009770190:web:81b82b82cc9bdb686cca9f"
  };

  firebase.initializeApp(firebaseConfig);

  const auth = firebase.auth();
  const db = firebase.firestore();
</script>

<!-- LANGUAGE LOGIC -->
<script>
(function(){
  const FLAGS = { it:"üáÆüáπ", en:"üá¨üáß", de:"üá©üá™" };
  const LANG = {
    it:{title:"Casa del Gelato",create_cup_title:"Crea la tua Coppa",create_cup_subtitle:"Personalizza la tua coppa come la vuoi tu",create_button:"üç® INIZIA",contacts:"I nostri Locali"},
    en:{title:"House of Gelato",create_cup_title:"Create Your Cup",create_cup_subtitle:"Customize your cup",create_button:"üç® START",contacts:"Our Shops"},
    de:{title:"Haus des Gelatos",create_cup_title:"Erstelle deinen Becher",create_cup_subtitle:"Gestalte deinen Becher",create_button:"üç® START",contacts:"Unsere Standorte"}
  };

  const toggle = document.getElementById('lang-toggle');
  const menu = document.getElementById('lang-menu');

  toggle.onclick = () => menu.style.display = menu.style.display=="flex" ? "none" : "flex";

  document.addEventListener('click', e => {
    if(!e.target.closest('#lang-toggle') && !e.target.closest('#lang-menu')) menu.style.display="none";
  });

  function apply(l){
    localStorage.setItem("lang",l);
    document.querySelectorAll("[data-lang]").forEach(el => el.textContent = LANG[l][el.dataset.lang]);
    toggle.textContent = FLAGS[l] + " ‚ñæ";
  }

  const urlParams = new URLSearchParams(window.location.search);
  const urlLang = urlParams.get("lang");
  if (urlLang) localStorage.setItem("lang", urlLang);

  apply(localStorage.getItem("lang") || "it");

  document.querySelectorAll(".lang-btn").forEach(btn =>
    btn.onclick = () => apply(btn.dataset.lang)
  );

  document.getElementById("start-coppa").onclick = () => {
    window.location.href = "crea-coppa.html";
  };
})();
</script>


<script>
if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("service-worker.js")
        .then(() => console.log("SW registrato"))
        .catch(err => console.error("SW errore:", err));
}
</script>

<script>
// Nasconde il tasto "Coppe create" se NON sei registrato
document.addEventListener("DOMContentLoaded", () => {
    const logged = localStorage.getItem("userLogged") === "1";
    const btnCrono = document.getElementById("btn-cronologia");

    if (!logged && btnCrono) {
        btnCrono.style.display = "none";
    }
});
</script>
<script>
document.addEventListener("DOMContentLoaded", () => {
    const isLogged = localStorage.getItem("userLogged") === "1";
    const btn = document.getElementById("btn-disiscriviti");

    // Se NON sei registrato ‚Üí nascondi il tasto
    if (!isLogged) {
        if (btn) btn.style.display = "none";
    }
});
</script>
<script type="module">
import { supabase } from "./supabase.js";

let waitInterval = null;
let collapseTimeout = null;

function expandWaitBar() {
  const full = document.getElementById("wait-full");
  const compact = document.getElementById("wait-compact");

  if (!full || !compact) return;

  full.style.display = "inline";
  compact.style.display = "none";

  clearTimeout(collapseTimeout);
  collapseTimeout = setTimeout(collapseWaitBar, 5000);
}

function collapseWaitBar() {
  const full = document.getElementById("wait-full");
  const compact = document.getElementById("wait-compact");

  if (!full || !compact) return;

  full.style.display = "none";
  compact.style.display = "inline";
}

async function loadWaitTime() {
  const { data, error } = await supabase
    .from("wait_time")
    .select("*")
    .eq("id", 1)
    .single();

  if (error || !data) return;

  const bar = document.getElementById("wait-bar");
  const txt = document.getElementById("wait-time");

  if (!bar || !txt) return;

  // stop eventuale timer precedente
  if (waitInterval) {
    clearInterval(waitInterval);
    waitInterval = null;
  }

  if (!data.active || data.minutes <= 0) {
    bar.style.display = "none";
    return;
  }

  const startTime = new Date(data.updated_at).getTime();
  const totalSeconds = data.minutes * 60;

function tick() {
  const now = Date.now();
  const elapsed = Math.floor((now - startTime) / 1000);
  const remaining = totalSeconds - elapsed;

  if (remaining <= 0) {
    bar.style.display = "none";
    clearInterval(waitInterval);
    waitInterval = null;
    return;
  }

  const min = Math.floor(remaining / 60);
  const sec = remaining % 60;
  const timeStr = `${min}:${sec.toString().padStart(2, "0")}`;

  // üî¢ aggiorna entrambi i testi
  txt.textContent = timeStr;
  document.getElementById("wait-mmss").textContent = timeStr;

  bar.style.display = "flex";

// ‚è±Ô∏è quando inizia un nuovo minuto ‚Üí riapre la barra
if (sec === 59) {
  expandWaitBar();
}
}
  tick(); // ‚è±Ô∏è avvio immediato
  waitInterval = setInterval(tick, 1000);
}

// üî¥ REALTIME WAIT TIME
supabase
  .channel("wait-time-live")
  .on(
    "postgres_changes",
    {
      event: "*",
      schema: "public",
      table: "wait_time"
    },
    payload => {
      console.log("üîÅ wait_time aggiornato realtime:", payload);
      loadWaitTime();
    }
  )
  .subscribe();

document.addEventListener("DOMContentLoaded", loadWaitTime);
</script>



</div>



<div id="menu-overlay" style="
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.35);
  opacity:0;
  pointer-events:none;
  transition:.25s;
  z-index:10000;
"></div>

<div id="menu-dropdown" style="
  position:fixed;
  top:60px;
  left:14px;
  width:220px;
  background:#fff;
  border-radius:14px;
  box-shadow:0 12px 30px rgba(0,0,0,0.25);
  padding:10px;
  opacity:0;
  pointer-events:none;
  transform:translateY(-10px);
  transition:.25s;
  z-index:10002;
">
<a href="crea-coppa.html" class="menu-item menu-new-only">
  <span class="badge-new-left">NEW</span>
  <span>Crea Coppa</span>
</a>
<a href="home.html" class="menu-item">
  <svg class="menu-icon" viewBox="0 0 24 24" aria-hidden="true">
    <path d="M3 11.5L12 4l9 7.5" />
    <path d="M5 10.5V20a1 1 0 0 0 1 1h4v-6h4v6h4a1 1 0 0 0 1-1v-9.5" />
  </svg>
  <span>Home</span>
</a>
  <a href="menu.html" class="menu-item">
  <svg class="menu-icon" viewBox="0 0 24 24" aria-hidden="true">
    <rect x="6" y="4" width="12" height="16" rx="2"
          fill="none" stroke="currentColor" stroke-width="2"/>
    <line x1="9" y1="9" x2="15" y2="9"
          stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
    <line x1="9" y1="13" x2="15" y2="13"
          stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
    <line x1="9" y1="17" x2="13" y2="17"
          stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
  </svg>
  <span>Menu</span>
</a>
<a href="profilo.html" class="menu-item">
  <svg class="menu-icon" viewBox="0 0 24 24" aria-hidden="true">
    <path d="M12 12c2.761 0 5-2.239 5-5S14.761 2 12 2 7 4.239 7 7s2.239 5 5 5zm0 2c-4.418 0-8 2.239-8 5v1h16v-1c0-2.761-3.582-5-8-5z"/>
  </svg>
  <span>Profilo</span>
</a>
<a href="info-contatti.html" class="menu-item">
  <svg class="menu-icon" viewBox="0 0 24 24" aria-hidden="true">
    <!-- CERCHIO -->
    <circle
      cx="12"
      cy="12"
      r="9"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
    />

    <!-- PALLINO DELLA i -->
    <circle
      cx="12"
      cy="8"
      r="0.5"
      fill="currentColor"
    />

    <!-- STELO DELLA i -->
    <line
      x1="12"
      y1="11"
      x2="12"
      y2="17"
      stroke="currentColor"
      stroke-width="2.2"
      stroke-linecap="round"
    />
  </svg>
  <span>Info &amp; Contatti</span>
</a>
<a href="lavora-con-noi.html" class="menu-item">
  <svg class="menu-icon" viewBox="0 0 24 24" aria-hidden="true">
    <!-- corpo valigetta -->
    <rect x="3" y="7" width="18" height="13" rx="2"
          fill="none" stroke="currentColor" stroke-width="2"/>
    <!-- manico -->
    <path d="M9 7V5a3 3 0 0 1 6 0v2"
          fill="none" stroke="currentColor" stroke-width="2"
          stroke-linecap="round"/>
  </svg>
  <span>Lavora con noi</span>
</a>
</div>

<script>
  const menuBtn = document.getElementById("menu-btn");
  const menu = document.getElementById("menu-dropdown");
  const overlay = document.getElementById("menu-overlay");

  function openMenu(){
    menu.classList.add("open");
    menu.style.opacity = "1";
    menu.style.pointerEvents = "auto";
    menu.style.transform = "translateY(0)";

    overlay.style.opacity = "1";
    overlay.style.pointerEvents = "auto";
  }

  function closeMenu(){
    menu.classList.remove("open");
    menu.style.opacity = "0";
    menu.style.pointerEvents = "none";
    menu.style.transform = "translateY(-10px)";

    overlay.style.opacity = "0";
    overlay.style.pointerEvents = "none";
  }

  menuBtn.addEventListener("click", () => {
    const isOpen = menu.classList.contains("open");
    isOpen ? closeMenu() : openMenu();
  });

  overlay.addEventListener("click", closeMenu);

  // chiude con ESC
  document.addEventListener("keydown", (e) => {
    if (e.key === "Escape") closeMenu();
  });

  // chiude quando clicchi un link del menu
  menu.querySelectorAll("a").forEach(a => {
    a.addEventListener("click", closeMenu);
  });
</script>

<footer class="profile-footer">
  <div class="footer-links">
    <a href="privacy.html">Privacy</a> ¬∑
    <a href="termini.html">Termini</a> ¬∑
    <a href="cookie.html">Cookie</a>
  </div>

  <div class="footer-copy">
    ¬© 2026 Casa del Gelato
  </div>

  <div class="footer-version">
    Versione 1.0.0
  </div>
</footer>

<script>
const observer = new IntersectionObserver(entries => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      entry.target.classList.add("in-view");
    }
  });
}, { threshold: 0.4 });

document.querySelectorAll(".reveal").forEach(el => {
  observer.observe(el);
});
</script>




<script>
(() => {
  const btn = document.getElementById("scroll-top-btn");

  function checkScroll(){
    const scrollY = window.scrollY;
    const docH = document.documentElement.scrollHeight;
    const winH = window.innerHeight;

    // mostra SOLO quando sei quasi in fondo
    if (scrollY + winH > docH - 300){
      btn.classList.add("show");
    } else {
      btn.classList.remove("show");
    }
  }

  window.addEventListener("scroll", checkScroll, { passive: true });

  btn.addEventListener("click", () => {
    window.scrollTo({
      top: 0,
      behavior: "smooth"
    });
  });
})();
</script>

<script>
(() => {
  const btn = document.getElementById("menu-plus-btn");
  const slides = document.getElementById("menu-slides");

  if (!btn || !slides) return;

  let open = false;

  btn.addEventListener("click", () => {
    open = !open;

    slides.classList.toggle("open", open);
    btn.textContent = open ? "√ó" : "+";

    if (open) {

      /* üî• riduce spazio SOLO quando aperto */
      slides.style.marginBottom = "-360px";

      /* üîÅ RESET SLIDE + PILL (come CREA COPPA) */
      const steps = slides.querySelectorAll(".exp-step");
      const dots  = slides.querySelectorAll(".exp-bar span");

      steps.forEach(s => s.classList.remove("active"));
      dots.forEach(d => d.classList.remove("active"));

      if (steps[0]) steps[0].classList.add("active");
      if (dots[0])  dots[0].classList.add("active");

      /* üìç scroll controllato */
 const y = slides.getBoundingClientRect().top + window.scrollY - 20;

window.scrollTo({
  top: y,
  behavior: "smooth"
});

    } else {

      /* üîô ripristino PERFETTO (zero overlap) */
      slides.style.marginBottom = "";

    }
  });
})();
</script>

<script>
function initSwipeExperience(section) {
  if (!section) return;

  const slidesWrap = section.querySelector('.exp-slides');
  const steps = [...section.querySelectorAll('.exp-step')];
  const dots  = [...section.querySelectorAll('.exp-bar span')];

  let index = 0;
  let startX = 0;

  function show(i){
    steps.forEach((s, idx) =>
      s.classList.toggle("active", idx === i)
    );

    dots.forEach((d, idx) => {
      d.classList.toggle("active", idx === i);
      d.style.animation = "none";
      d.offsetHeight;
      if (idx === i) d.style.animation = "";
    });
  }

  function next(){
    index = (index + 1) % steps.length;
    show(index);
  }

  function prev(){
    index = (index - 1 + steps.length) % steps.length;
    show(index);
  }

  /* üì± TOUCH */
  slidesWrap.addEventListener("touchstart", e => {
    startX = e.touches[0].clientX;
  }, { passive: true });

  slidesWrap.addEventListener("touchend", e => {
    const diff = e.changedTouches[0].clientX - startX;
    if (Math.abs(diff) > 50){
      diff < 0 ? next() : prev();
    }
  });

  /* üñ±Ô∏è MOUSE */
  slidesWrap.addEventListener("mousedown", e => {
    startX = e.clientX;
  });

  window.addEventListener("mouseup", e => {
    const diff = e.clientX - startX;
    if (Math.abs(diff) > 50){
      diff < 0 ? next() : prev();
    }
  });
}
</script>

<script>
(() => {
  const section = document.querySelector('.experience:not([data-type="menu"])');
  if (!section) return;

  const slidesWrap = section.querySelector('.exp-slides');
  const steps = [...section.querySelectorAll('.exp-step')];
  const dots  = [...section.querySelectorAll('.exp-bar span')];

  let index = 0;
  let startX = 0;
  let timer = null;
  let inView = false;
  const DELAY = 5000;

  function show(i){
    steps.forEach((s, idx) =>
      s.classList.toggle("active", idx === i)
    );

    dots.forEach((d, idx) => {
      d.classList.toggle("active", idx === i);
      d.style.animation = "none";
      d.offsetHeight;
      if (idx === i) d.style.animation = "";
    });
  }

  function next(){
    index = (index + 1) % steps.length;
    show(index);
  }

  function prev(){
    index = (index - 1 + steps.length) % steps.length;
    show(index);
  }

  function start(){
    stop();
    timer = setInterval(next, DELAY);
  }

  function stop(){
    clearInterval(timer);
    timer = null;
  }

  // stato iniziale
  show(0);
  start();
  // üëÄ quando rientri sulla sezione ‚Üí riparte da "Scegli il formato"
  const io = new IntersectionObserver(entries => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        if (!inView) {
          inView = true;
          index = 0;
          show(0);
          start();
        }
      } else {
        inView = false;
        stop();
      }
    });
  }, { threshold: 0.6 });

  io.observe(section);
  /* üì± TOUCH */
  slidesWrap.addEventListener("touchstart", e => {
    startX = e.touches[0].clientX;
  }, { passive: true });

  slidesWrap.addEventListener("touchend", e => {
    const diff = e.changedTouches[0].clientX - startX;
    if (Math.abs(diff) > 50){
      diff < 0 ? next() : prev();
      start(); // üîÅ riparte autoplay
    }
  });

  /* üñ±Ô∏è MOUSE */
  slidesWrap.addEventListener("mousedown", e => {
    startX = e.clientX;
  });

  window.addEventListener("mouseup", e => {
    const diff = e.clientX - startX;
    if (Math.abs(diff) > 50){
      diff < 0 ? next() : prev();
      start(); // üîÅ riparte autoplay
    }
  });

})();
</script>

<script>
document.addEventListener("DOMContentLoaded", () => {
  initSwipeExperience(
    document.querySelector('.experience:not([data-type="menu"])')
  );
});
</script>
<script>
document.addEventListener("DOMContentLoaded", () => {
  initSwipeExperience(
    document.querySelector('.experience[data-type="menu"]')
  );
});
</script>

<script>
document.addEventListener("DOMContentLoaded", () => {
  initSwipeExperience(
    document.querySelector('.experience[data-type="info"]')
  );
});
</script>

<script>
(() => {
  const btn = document.getElementById("info-plus-btn");
  const slides = document.getElementById("info-slides");

  if (!btn || !slides) return;

  let open = false;

  btn.addEventListener("click", () => {
    open = !open;

    document.body.classList.toggle("info-open", open);
    document.body.classList.toggle("info-closed", !open);

    slides.classList.toggle("open", open);
    btn.textContent = open ? "√ó" : "+";

    if (open) {
      const steps = slides.querySelectorAll(".exp-step");
      const dots  = slides.querySelectorAll(".exp-bar span");

      steps.forEach(s => s.classList.remove("active"));
      dots.forEach(d => d.classList.remove("active"));

      if (steps[0]) steps[0].classList.add("active");
      if (dots[0])  dots[0].classList.add("active");

      const y = slides.getBoundingClientRect().top + window.scrollY - 20;
      window.scrollTo({ top: y, behavior: "smooth" });
    }
  });

  // stato iniziale: info chiuso
  document.body.classList.add("info-closed");

})();
</script>
<script>
(() => {
  const section = document.querySelector('.experience[data-type="info"]');
  if (!section) return;

  const slidesWrap = section.querySelector('.exp-slides');
  const steps = [...section.querySelectorAll('.exp-step')];
  const dots  = [...section.querySelectorAll('.exp-bar span')];

  let index = 0;
  let startX = 0;
  let timer = null;
  const DELAY = 5000;

  function show(i){
    steps.forEach((s, idx) =>
      s.classList.toggle("active", idx === i)
    );

    dots.forEach((d, idx) => {
      d.classList.toggle("active", idx === i);
      d.style.animation = "none";
      d.offsetHeight;
      if (idx === i) d.style.animation = "";
    });
  }

  function next(){
    index = (index + 1) % steps.length;
    show(index);
  }

  function prev(){
    index = (index - 1 + steps.length) % steps.length;
    show(index);
  }

  function start(){
    stop();
    timer = setInterval(next, DELAY);
  }

  function stop(){
    clearInterval(timer);
    timer = null;
  }

  /* üîÅ RESET quando apri INFO */
  const infoBtn = document.getElementById("info-plus-btn");
  infoBtn.addEventListener("click", () => {
    setTimeout(() => {
      index = 0;
      show(0);
      start();
    }, 300);
  });

  /* üì± TOUCH */
  slidesWrap.addEventListener("touchstart", e => {
    startX = e.touches[0].clientX;
  }, { passive: true });

  slidesWrap.addEventListener("touchend", e => {
    const diff = e.changedTouches[0].clientX - startX;
    if (Math.abs(diff) > 50){
      diff < 0 ? next() : prev();
      start();
    }
  });

  /* üñ±Ô∏è MOUSE */
  slidesWrap.addEventListener("mousedown", e => {
    startX = e.clientX;
  });

  window.addEventListener("mouseup", e => {
    const diff = e.clientX - startX;
    if (Math.abs(diff) > 50){
      diff < 0 ? next() : prev();
      start();
    }
  });

})();
</script>
</body>
</html>